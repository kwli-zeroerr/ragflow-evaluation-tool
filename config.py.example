"""
配置文件示例
请复制此文件为 config.py 并填入你的实际配置信息
config.py 已被添加到 .gitignore，不会被提交到 GitHub
"""

# RagFlow API 配置
# 生产环境（OpenWebUI RAGFlow 接口）
PROD_API_URL = "http://your-prod-api-url:port/"
PROD_API_KEY = "your-production-api-key"
PROD_KNOWLEDGE_ID = "your-knowledge-id"  # OpenWebUI 知识库ID

# 测试环境（标准 RagFlow API）
TEST_API_URL = "http://your-test-api-url:port/"
TEST_API_KEY = "your-test-api-key"

# 开发环境（标准 RagFlow API）
DEV_API_URL = "http://your-dev-api-url:port/"
DEV_API_KEY = "your-dev-api-key"

# OpenWebUI RAGFlow 相关配置（仅生产环境使用）
USE_RAGFLOW_FORMAT = True   # 是否使用 RAGflow 格式返回
USE_RAGFLOW_INDEX = True    # 是否使用 RAGFlow ES 索引
RAGFLOW_TIMEOUT = 30        # OpenWebUI 接口超时时间（秒）

# 默认使用哪个环境
DEFAULT_ENV = "test"  # 可选: "prod"、"test" 或 "dev"

# ========== 并发执行配置 ==========
# 是否启用并发执行
# True: 启用并发执行（使用 MAX_WORKERS 个线程）
# False: 禁用并发，使用顺序执行（单线程）
ENABLE_CONCURRENCY = True  # 默认值：True（启用并发）

# 并发线程数，仅在 ENABLE_CONCURRENCY=True 时生效
# 设置为1表示顺序执行（单线程），大于1表示并发执行
# 建议值：根据API服务器的处理能力和限流策略设置，通常设置为 3-10
# 注意：并发数过高可能导致API限流或服务器压力过大
MAX_WORKERS = 5  # 默认值：5，建议值：3-10

# 每个请求之间的延迟（秒），用于避免API限流
# 在并发模式下，每个线程会独立应用此延迟
# 建议值：0.1-1.0 秒，根据API限流策略调整
DELAY_BETWEEN_REQUESTS = 0.5  # 默认值：0.5 秒

# ========== 重试机制配置 ==========
# API调用失败时的重试次数
MAX_RETRIES = 3  # 默认值：3次

# 重试延迟（秒），每次重试前等待的时间
RETRY_DELAY = 1.0  # 默认值：1.0秒

# 是否启用指数退避（每次重试延迟时间递增）
# True: 延迟时间递增（1s → 2s → 4s），适合网络不稳定情况
# False: 固定延迟时间，适合限流等情况
USE_EXPONENTIAL_BACKOFF = True  # 默认值：True

# ========== A/B测试配置 ==========
# 是否启用A/B测试
# True: 运行A/B测试（对比两种配置方案）
# False: 只运行单次评测（使用下面的RETRIEVAL_CONFIG配置）
ENABLE_AB_TEST = False  # 默认值：False（单次评测）

# ========== 单次评测配置（当ENABLE_AB_TEST=False时使用）==========
# 检索参数配置
RETRIEVAL_CONFIG = {
    "top_k": 1024,  # API默认值
    "similarity_threshold": 0.2,  # API默认值
    "vector_similarity_weight": 0.3,  # 向量相似度权重
    "rerank_id": "",  # API默认值
    "highlight": False,  # API默认值
    "page": 1,  # API默认值
    "page_size": 30  # API默认值
}

# ========== 测试用例限制配置 ==========
# 限制测试用例数量，设置为 None 或 0 表示使用所有测试用例
# 设置为正整数表示只使用前N个测试用例
MAX_TEST_CASES = None  # 例如: 1000 或 None（使用全部）

# ========== 测试用例范围配置 ==========
# 指定测试用例的索引范围，用于只测试部分用例
# 格式：(起始索引, 结束索引)，索引从1开始（对应Excel中的行号）
# 设置为 None 表示使用所有测试用例
# 例如：(626, 1000) 表示只测试索引626到1000的用例
# 注意：此配置会覆盖 MAX_TEST_CASES 的设置
TEST_CASE_RANGE = None  # 例如: (626, 1000) 或 None（使用全部）

